<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8" />
    <title>WithMe</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />

    <style>
            :root{
                --bg:#f6f7fb;
                --panel:#ffffff;
                --border:#e6e8ee;
                --text:#111827;
                --muted:#6b7280;
                --primary:#3b82f6;
                --primary-600:#2563eb;
                --danger:#ef4444;
                --danger-600:#dc2626;
                --accent:#6366f1;
                --shadow:0 6px 24px rgba(20,26,38,0.06);
                --radius:14px;
                --radius-sm:10px;
                --ring:0 0 0 4px rgba(59,130,246,0.14);
            }
        h2 {
            margin-bottom: 1rem;
            font-weight: bold;
        }

        /* 하단 버튼 */
        .form-actions{
            margin-top:16px;
            display:flex; justify-content:flex-end; gap:10px;
        }
        .btn{
            appearance:none;border:1px solid var(--border);background:#fff;
            color:#111827;padding:9px 12px;border-radius:10px;
            cursor:pointer;font-weight:600;
            transition:box-shadow .15s ease, transform .06s ease, border-color .15s ease;
        }
        .btn-solid{
            background:var(--accent); color:#fff; border:1px solid transparent;
        }
        .btn-solid:hover{background:#5558e6; box-shadow:var(--ring)}
    </style>

    <script>
            function goMain(){
                location.href = '/';
            }
    </script>

</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark mb-4">
        <div class="container-fluid">
            <div class="mx-auto">
                <a class="navbar-brand" href="/">WithMe</a>
            </div>
            <div class="d-flex">
                <a class="btn btn-outline-light me-2" href="/post/new">새 글 작성</a>
                <a class="btn btn-outline-light me-2" href="/mypage">마이페이지</a>
                <a class="btn btn-outline-light" href="/logout">로그아웃</a>
            </div>
        </div>
    </nav>

    <div class="container">
        <h2> ※ 나의 작성글</h2>
        {% if myPosts %}
        <table class="table table-bordered" style="text-align: center;">
            <tr>
                <td>
                    제목
                </td>
                <td>
                    사진
                </td>
                <td>
                    작성자
                </td>
                <td>
                    조회수
                </td>
                <td>
                    마감일
                </td>
                <td>
                    모집현황
                </td>
                <td>
                    상태
                </td>
                <td>
                    카테고리
                </td>
            </tr>
            {%for post in myPosts %}
            <tr style="vertical-align: middle;">
                <td style="text-align: left;">
                    <a href="/post/{{post._id}}" class="text-decoration-none fw-bold text-dark">
                        {{ post.title }}
                    </a>
                </td>
                <td>
                    <img src="{{ post.picture }}" alt="게시글 이미지" style="max-width: 150px; max-height: 100px;">
                </td>
                <td>
                    {{post.author}}
                </td>
                <td>
                    {{post.viewcount}}
                </td>
                <td>
                    {{ post.closing_date[:10] }} {{ post.closing_date[11:] }}
                </td>
                <td>
                    {{post.status}} / {{post.required}}
                </td>
                <td>
                    {% if post.statu == 1 %}
                    모집중
                    {% else %}
                    모집완료
                    {% endif %}
                </td>
                <td>
                    {{post.category}}
                </td>
            </tr>
            {%endfor%}
        </table>
        {% else %}
        <div class="alert alert-secondary" role="alert">
            현재 게시글이 없습니다.
        </div>
        {% endif %}
    </div>


        <br>

    <div class="container">
        <h2> ※ 나의 참여글</h2>
        {% if applyPosts %}
        <table class="table table-bordered" style="text-align: center;">
            <tr>
                <td>
                    제목
                </td>
                <td>
                    사진
                </td>
                <td>
                    작성자
                </td>
                <td>
                    조회수
                </td>
                <td>
                    마감일
                </td>
                <td>
                    모집현황
                </td>
                <td>
                    상태
                </td>
                <td>
                    카테고리
                </td>
            </tr>
            {%for post in applyPosts %}
            <tr style="vertical-align: middle;">
                <td style="text-align: left;">
                    <a href="/post/{{post._id}}" class="text-decoration-none fw-bold text-dark">
                        {{ post.title }}
                    </a>
                </td>
                <td>
                    <img src="{{ post.picture }}" alt="게시글 이미지" style="max-width: 150px; max-height: 100px;">
                </td>
                <td>
                    {{post.author}}
                </td>
                <td>
                    {{post.viewcount}}
                </td>
                <td>
                    {{ post.closing_date[:10] }} {{ post.closing_date[11:] }}
                </td>
                <td>
                    {{post.status}} / {{post.required}}
                </td>
                <td>
                    {% if post.statu == 1 %}
                    모집중
                    {% else %}
                    모집완료
                    {% endif %}
                </td>
                <td>
                    {{post.category}}
                </td>
            </tr>
            {%endfor%}
        </table>

        <nav aria-label="Page navigation">
            <ul class="pagination justify-content-center">
                <!-- 이전 버튼 -->
                <li class="page-item {% if page <= 1 %}disabled{% endif %}">
                    <a class="page-link"
                        href="?page={{ page - 1 }}{% for key, value in query_params.items() %}&{{ key }}={{ value }}{% endfor %}">이전</a>
                </li>

                <!-- 페이지 숫자 -->
                {% for p in range(1, total_pages + 1) %}
                <li class="page-item {% if p == page %}active{% endif %}">
                    <a class="page-link"
                        href="?page={{ p }}{% for key, value in query_params.items() %}&{{ key }}={{ value }}{% endfor %}">{{
                        p }}</a>
                </li>
                {% endfor %}

                <!-- 다음 버튼 -->
                <li class="page-item {% if page >= total_pages %}disabled{% endif %}">
                    <a class="page-link"
                        href="?page={{ page + 1 }}{% for key, value in query_params.items() %}&{{ key }}={{ value }}{% endfor %}">다음</a>
                </li>
            </ul>
        </nav>
        
        {% else %}
        <div class="alert alert-secondary" role="alert">
            현재 게시글이 없습니다.
        </div>
        {% endif %}

        <div class="form-actions">
            <button class="btn btn-solid" type="button" onclick="goMain();">메인으로</button>
        </div>
    </div>

        
        
    </body>